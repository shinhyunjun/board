<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mb.mapper.BoardMapper">

    <insert id="create">

        INSERT INTO board2(title,content,writer)
           VALUES(#{title}, #{content}, #{writer})
    </insert>

    <select id="list" resultType="com.example.mb.domain.Board">
        <![CDATA[

            select board_no as boardNo, title, content, writer, reg_date
            from board2
            where board_no >0
            order by board_no DESC, reg_date DESC
        ]]>
    </select>

    <select id="read" resultType="Board">
		SELECT board_no,
			   title,
			   content,
			   writer,
			   reg_date
		  FROM board2
		 WHERE board_no = #{boardNo}
	</select>


    <select id="search" resultType="com.example.mb.domain.Board">
        <![CDATA[
	 	SELECT board_no,
	 		   title,
	 		   content,
	 		   writer,
	 		   reg_date
	 	  FROM board2
	     WHERE board_no > 0
	 	]]>

        <if test="title != null and title != ''">
            AND title LIKE CONCAT('%', #{title}, '%')
        </if>

        <![CDATA[
	 	ORDER BY board_no DESC,
	  		     reg_date DESC
	 	]]>
    </select>

</mapper>